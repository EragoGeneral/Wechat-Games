function forceScroll(){global.isDesktop||null==game.canvas||void 0==game.canvas||void 0==document.getElementById("game")||null==document.getElementById("game")||(1==temp_scroll_x?(temp_scroll_x=-1,document.getElementById("orientation").innerHTML="."):(temp_scroll_x=1,document.getElementById("orientation").innerHTML=".."))}function auto_resize_area(){var e=!0,a=game.width,n=game.height,t=a/n,i=window.innerWidth/window.innerHeight,o=window.innerWidth,l=window.innerHeight;1==e?i>t?o=window.innerHeight*t:l=window.innerWidth/t:(o=window.innerHeight/t,l=window.innerWidth*t),global.isDesktop?(document.getElementById("game").style.width=window.innerWidth-1+"px",document.getElementById("game").style.height=window.innerHeight-1+"px"):(document.getElementById("game").style.width=window.innerWidth-2+"px",document.getElementById("game").style.height=window.innerHeight+2+"px"),game.canvas&&(game.canvas.style.width=o+"px",game.canvas.style.height=l+"px",document.getElementById("orientation").style.width=window.innerWidth+"px",document.getElementById("orientation").style.height=window.innerHeight+"px",game.canvas.style.marginLeft="auto",game.canvas.style.marginRight="auto"),game.renderType===Phaser.WEBGL,init_refresh_page()}function init_refresh_page(){auto_refresh_page_id=setTimeout(auto_refresh_page,700)}function get_current_ori(){return window.innerWidth>window.innerHeight?"landscape":"portrait"}function auto_refresh_page(){if(1!=global.isDesktop){var e=window.innerWidth,a=window.innerHeight,n=Math.abs(oldInnerWidth-e),t=Math.abs(oldInnerHeight-a);global.dw=n,global.dh=t;var i=get_current_ori();console.log("cur "+i+"; landscape "+global.landscape+"; isDesktop "+global.isDesktop+"; force "+global.forceReloadFlag+"; dw/dh "+n+"|"+t+"; hasOriChanged : "+global.hasOrientationChanged),(("portrait"==i&&0==global.landscape||"landscape"==i&&1==global.landscape)&&global.hasOrientationChanged||("portrait"==i&&0==global.landscape||"landscape"==i&&1==global.landscape)&&1==global.forceReloadFlag)&&(0==global.forceWidth?location.reload():(console.log("CORRECT ORI"),document.getElementById("orientation").style.display="none")),(global.hasOrientationChanged&&"landscape"==i&&1==global.landscape||global.hasOrientationChanged&&"portrait"==i&&0==global.landscape)&&(global.hasOrientationChanged=!1),("portrait"==i&&0==global.landscape||"landscape"==i&&1==global.landscape)&&(oldInnerWidth=e,oldInnerHeight=a),("portrait"==i&&1==global.landscape||"landscape"==i&&0==global.landscape)&&(document.getElementById("orientation").style.display="block")}}function initOnce(){document.body.style.backgroundImage="url('assets/tile.png')",auto_resize_area(),clearInterval(auto_resize_area_id)}function orientationchange(){var e=get_current_ori();e!==previousOrientation&&(previousOrientation=e,global.hasOrientationChanged=!0)}function deviceSizeCheck(){global.deviceWidth=window.innerWidth,global.deviceHeight=window.innerHeight}var temp_scroll_x=1,oldInnerWidth=window.innerWidth,oldInnerHeight=window.innerHeight;global.hasOrientationChanged=!1;var auto_refresh_page_id=-1;global.forceReloadFlag=!1;var previousOrientation=get_current_ori();!function(){global.logicWidth=640,global.logicHeight=1020,global.landscape=!1,global.simulatedMobile=!1,global.forceWidth=!0,global.astrid=!1,global.deviceWidth=window.innerWidth,global.deviceHeight=window.innerHeight,setInterval(deviceSizeCheck,1),BasicGame.logicWidth=global.logicWidth,BasicGame.logicHeight=global.logicHeight,global.processScaling();var e=navigator.userAgent,a=boolean=/Android/.test(e),n=boolean=/Chrome/.test(e);game=a&&!n?new Phaser.Game(BasicGame.gameWidth,BasicGame.gameHeight,Phaser.CANVAS,"game"):new Phaser.Game(BasicGame.gameWidth,BasicGame.gameHeight,Phaser.AUTO,"game"),global.forceWidth||global.astrid&&0==global.landscape&&global.isDesktop?(window.addEventListener("resize",auto_resize_area,!1),auto_resize_area(),auto_resize_area_id=setInterval(initOnce,3e3),setInterval(auto_resize_area,1e3)):1==global.simulatedMobile&&window.addEventListener("resize",init_refresh_page,!1),1==global.astrid&&(window.addEventListener("resize",init_refresh_page,!1),document.getElementById("game").style.width=window.innerWidth-2+"px",document.getElementById("game").style.height=window.innerHeight-2+"px",1==global.isDesktop&&(document.getElementById("game").style.overflow="hidden")),global.orientationKampret=window.orientation,window.addEventListener("orientationchange",orientationchange),window.addEventListener("resize",orientationchange,!1),setInterval(orientationchange,1e3),setInterval(forceScroll,20),game.state.add("Boot",BasicGame.Boot),game.state.add("Preloader",BasicGame.Preloader),game.state.add("cmainmenu",cmainmenu),game.state.add("cgame",cgame),game.state.start("Boot")}();